% !TEX root =  ../main.tex
 \section{Discussion: validity and interest of our contact planner} 
\label{sec:discussion}

\subsection{Accuracy and performance gain of the reachability condition}

As demonstrated in the results section, the main interest of our method is time performance. Time performance is critical for 
online applications with the robot, a goal not satisfied by any of the previous contributions. Our method addresses highly constrained environments while improving the search time by orders of magnitude. This high performance is reached at the cost of some approximations that we discuss here. 
%~ In previous approaches, we identified 2 sources of high computational cost. 

The first approximation is the verification of \contactreachability\ ($\mathbf{q}^0 \in C_{Contact}^0$).  Our \textit{reachability condition} ($\mathbf{q}^0 \in C_{Reach}^0$) is computationally efficient and provides an accurate approximation of $C_{Contact}^0$ (Section~\ref{sec:scaling}). This is demonstrated by the second column of Table~\ref{tab:requestpercent}, and illustrated by Figure~\ref{fig:dedefeas}. Indeed, in the large majority of cases, (84\% in the worst car egress case), we are able to find a contact configuration for any configuration in $C_{Reach}^0$.

%~ These results clearly demonstrate that the reachability condition, presented in Section~\ref{sec:scaling}, provides an accurate representation of the 
%~ contact we combine only-necessary and only-sufficient conditions which are trivial to estimate. Only-necessary conditions are appealing because they preserve the completeness of the search, while reducing 
%~ the search space: they provide an outer approximation of $C_{Contact}^0$. On the other hand, only-sufficient conditions provide the guarantee that any configuration that satisfies them is indeed \gls{contact reachable}: they provide an inner approximation of $C_{Contact}^0$.

Another source of computational cost identified in previous works is the verification of \equilibriumfeasibility. 
The strong assumption of our work is that for the class of problems we consider \contactreachability\ implies \equilibriumfeasibility.
Our scenarios show that the  assumption is verified in the majority of cases when at least one contact surface is \textit{quasi flat}~\cite{Prete2016}, that is when
the friction cone of the contact surface contains the direction opposite to the gravity.
Figure~\ref{fig:dedefeas} illustrates this observation, demonstrated empirically by the third column of Table~\ref{tab:requestpercent}. In the worst case, in our experiment
the assumption was verified for 82\% of the total amount of trials that verified \contactreachability\.
In the example of \cite{Bouyarmane2009}, the verification of \equilibriumfeasibility\ implies a constructive demonstration by exhibiting a valid $\mathbf{q}^{\overline{0}}$, requiring
several minutes of planning. Our method, in comparison, takes from a few milliseconds to several seconds.

These results clearly justify the pragmatic decisions of this paper.

\subsection{Addressing $\mathcal{P}_3$}
This paper focuses on contact planning of multi-contact locomotion. While it does not address directly the continuous motion generation,
we had to prove that the plans produced by our planner can be executed by the considered robots. Problem $\mathcal{P}_3$ remains an active research topic~\cite{Carpentier2016, herzog2015trajectory}, for which the implemented a solution in this paper, described in appendix 
%~ and most existing solutions do not consider collisions with the environment during the planning, making it hard to validate constrained problems such as the polaris scenario
%~ or the table egress in \cite{DBLP:conf/iser/EscandeKMG08}.
The companion video shows the results that we obtained in simulation and on the real HRP-2 robot.
In these scenarios the robot is able to execute our plans, while respecting the constraints inherent to the problem: joint kinematics and torque limits and
collision avoidance.
%~ \adnote{Probably you should add in appendix an explanation of how you solve $P_3$ and refer to it here.}

\begin{figure}[t]
\centering
  \begin{overpic}[width=1\linewidth]{figures/2D_feas}
		\put (15,) {$C_{Equil}^0$      $\subset$} 
		\put (47,) {$C_{Contact}^0$ $\approx$ } 
		\put (76,) {$C_{Reach}^0$} 
	\end{overpic}
\caption{Illustration of several root configurations sets used in this paper in a 2D scene. Obstacles are violet, and units are in meters. To show the sets in a 2D representation, all the rotational joints of HRP-2 are locked in the shown configuration, such that a torso configuration
is only described by two positional parameters (x and y). The root of the robot is indicated with a black cross. To compute the reachable workspace, the point on the ankle indicated by a green cross was used. $C_{Equil}^0$ is included in $C_{Contact}^0$. $C_{Reach}^0$ approximates $C_{Contact}^0$. Depending on a parametrization, we can obtain $C_{Contact}^0 \subset C_{Reach}^0$. Considering the configurations around the top obstacle, we can observe a similarity between  $C_{Equil}^0$  and $C_{Contact}^0$ when the reachable workspace of the legs includes \textit{quasi-flat} surfaces.}
		   \label{fig:dedefeas}
\end{figure}

%~ \subsection{feasibility }

\section{Conclusion} 
\label{sec:conclusion}

In this paper we consider the multi-contact planning problem, formulated as two sub-problems that we address sequentially.
The first problem $\mathcal{P}_1$ consists in computing an \gls{equilibrium feasible} guide path for the root of the robot;
 the second problem $\mathcal{P}_2$ is the computation of a discrete sequence of whole-body configurations along the root path.

Our contribution to \Pa is the introduction of a low-dimensional space $C_{reach}^0$, an approximation of the space of \gls{equilibrium feasible} root configurations.
$C_{reach}^0$ can be efficiently sampled and has a low-dimension. For these reasons we are able to solve \Pa much faster than previous approaches.

%~ Our contribution to \Pa is a generic characterization of the properties that the guide path must satisfy, in particular to enforce the completeness of the acyclic contact planner. 
Our contribution to \Pb is a fast contact generation scheme that can optimize user-defined criteria.

Our results demonstrate that our method allows a pragmatic compromise between three 
criteria that are hard to conciliate: generality, performance, and quality of the solution, making it the first acyclic contact
planner compatible with \gls{interactive} applications.
%
\textbf{Regarding generality}, the \textit{reachability condition}, coupled with an approach based on limb decomposition, 
allows the method to address automatically arbitrary legged robots.
%
\textbf{Regarding performance}, our framework is efficient in addressing both \Pa and $\mathcal{P}_2$. This results in \gls{interactive} computation times.
%
\textbf{Regarding the quality of the paths}, we are able to compute
\gls{equilibrium feasible} paths in all the presented scenarios, with high success rates.
As for \cite{Bouyarmane2009}, failures can still occur, due to the approximate condition used to compute the guide path.
The low computational burden of our framework however allows for fast re-planning in case of failure.
Furthermore, because of this approximation, the guide search is not complete. The choice is deliberate, because we believe
that it is necessary to trade completeness for efficiency at all stages of the planner.
However, one direction for future work is to focus on a more accurate formulation of $C_{reach}^0$ to improve
the approximation.

Our method applies to any scenario where at least one contact friction cone contains
the direction opposed to the gravity (i.e. \textit{quasi-flat}). This class of scenarios include all the problems proposed at the DARPA Robotics Challenge.
One way to further extend its range of application, which we consider for future work, is to include the equilibrium criterion when solving $\mathcal{P}_1$.
Considering the set of obstacles intersecting with the reachable workspace for a given root configuration as candidate surfaces, we can use them to verify the equilibrium criterion.
This would give us a necessary condition for \equilibriumfeasibility.

While we have exhibited complete multi-contact locomotion obtained with our contact planner, our main concern for future work is to address the interpolation
between contact sequences ($\mathcal{P}_3$), which remains an open issue in highly-constrained scenarios.
Solving $\mathcal{P}_3$ requires addressing efficiently the collision avoidance problem in the interpolation phase, an issue 
not addressed by existing frameworks. We aim at providing our plans with transition certificates, that would define constraints on $\mathcal{P}_3$, under which
the transition between two contact configurations is feasible and collision-free.
%~ Our current direction is to propose a geometric quantification of both the kinematic and dynamic constraints of the problem, expressed
%~ at the center of mass of the robot.
 %~ We are also
%~ working on new heuristics more closely related to the dynamics of the systems (for instance, choose the contacts that minimize the jerk between two contact configurations).
Finally, we aim at performing kinodynamic planning to remove the constraint that configurations in the contact plan be in static equilibrium. We believe that the most promising direction in this regard is to integrate the notion of Admissible Velocity Propagation in our current work \citep{DBLP:conf/rss/PhamCN13}.
Addressing these two issues is essential to bridge the gap between the planning and control aspects of legged locomotion.
